package com.vrh.tech.gutenberg;

import android.app.ProgressDialog;
import android.os.Bundle;
import android.util.Log;

import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.google.gson.Gson;
import com.vrh.tech.gutenberg.adapter.CategoryAdapter;
import com.vrh.tech.gutenberg.model.BookDetail;
import com.vrh.tech.gutenberg.model.BookList;
import com.vrh.tech.gutenberg.model.CardModel;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

public class MainActivity extends AppCompatActivity {
    public CategoryAdapter adapter;
    private HashMap<String, List<BookDetail>> mBookMap = new HashMap<>();
    private RecyclerView recyclerView;
    private List<CardModel> list = new ArrayList<>();
    private ProgressDialog progressDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        init();
    }

    private void init() {
        getBookData();
        recyclerView = (RecyclerView) findViewById(R.id.recycler_view);
        adapter = new CategoryAdapter(list, mBookMap);
        RecyclerView.LayoutManager mLayoutManager = new LinearLayoutManager(getApplicationContext());
        recyclerView.setLayoutManager(mLayoutManager);
        recyclerView.setAdapter(adapter);
        createCardList();
    }

    private void getBookData() {
        progressDialog = new ProgressDialog(MainActivity.this);
        progressDialog.setMessage("Loading....");
        progressDialog.show();
        try {
            // Added static response due to facing issue in http call, expecting https
            String resp = "{\"count\":54857,\"next\":\"http://skunkworks.ignitesol.com:8000/books/?page=2\",\"previous\":null,\"results\":[{\"id\":1342,\"authors\":[{\"birth_year\":1775,\"death_year\":1817,\"name\":\"Austen, Jane\"}],\"bookshelves\":[\"Best Books Ever Listings\",\"Harvard Classics\"],\"download_count\":44776,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/1342.kindle.images\",\"application/pdf\":\"http://www.gutenberg.org/files/1342/1342-pdf.zip\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/1342/1342.zip\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/1342/1342-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/1342.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/1342/1342-0.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/1342.epub.images\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/1342/1342-h.zip\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Courtship -- Fiction\",\"Domestic fiction\",\"England -- Fiction\",\"Love stories\",\"Sisters -- Fiction\",\"Social classes -- Fiction\",\"Young women -- Fiction\"],\"title\":\"Pride and Prejudice\"},{\"id\":74,\"authors\":[{\"birth_year\":1835,\"death_year\":1910,\"name\":\"Twain, Mark\"}],\"bookshelves\":[\"Banned Books from Anne Haight's list\"],\"download_count\":17681,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/74.kindle.noimages\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/74/74-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/74.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/74/74.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/74.epub.images\",\"image/jpeg\":\"http://www.gutenberg.org/cache/epub/74/pg74.cover.medium.jpg\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/74/74-h/74-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Adventure stories\",\"Bildungsromans\",\"Boys -- Fiction\",\"Child witnesses -- Fiction\",\"Humorous stories\",\"Male friendship -- Fiction\",\"Mississippi River Valley -- Fiction\",\"Missouri -- Fiction\",\"Runaway children -- Fiction\",\"Sawyer, Tom (Fictitious character) -- Fiction\"],\"title\":\"The Adventures of Tom Sawyer\"},{\"id\":11,\"authors\":[{\"birth_year\":1832,\"death_year\":1898,\"name\":\"Carroll, Lewis\"}],\"bookshelves\":[\"Children's Literature\"],\"download_count\":17114,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/11.kindle.noimages\",\"application/pdf\":\"http://www.gutenberg.org/files/11/11-pdf.pdf\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/11/11.txt\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/11/11-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/11.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/11/11-0.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/11.epub.images\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/11/11-h/11-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Fantasy literature\"],\"title\":\"Alice's Adventures in Wonderland\"},{\"id\":98,\"authors\":[{\"birth_year\":1812,\"death_year\":1870,\"name\":\"Dickens, Charles\"}],\"bookshelves\":[\"Historical Fiction\"],\"download_count\":15050,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/98.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/98/98.txt\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/98/98-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/98.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/98/98-8.txt\",\"application/zip\":\"http://www.gutenberg.org/files/98/98.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/98.epub.noimages\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/98/98-h/98-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"British -- France -- Paris -- Fiction\",\"Executions and executioners -- Fiction\",\"France -- History -- Revolution, 1789-1799 -- Fiction\",\"French -- England -- London -- Fiction\",\"Historical fiction\",\"London (England) -- History -- 18th century -- Fiction\",\"Lookalikes -- Fiction\",\"Paris (France) -- History -- 1789-1799 -- Fiction\",\"War stories\"],\"title\":\"A Tale of Two Cities\"},{\"id\":1952,\"authors\":[{\"birth_year\":1860,\"death_year\":1935,\"name\":\"Gilman, Charlotte Perkins\"}],\"bookshelves\":[\"Gothic Fiction\"],\"download_count\":14684,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/1952.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/1952/1952.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/1952.rdf\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/1952.epub.noimages\",\"application/zip\":\"http://www.gutenberg.org/files/1952/1952.zip\",\"text/plain\":\"http://www.gutenberg.org/ebooks/1952.txt.utf-8\",\"text/html; charset=us-ascii\":\"http://www.gutenberg.org/files/1952/1952-h/1952-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Feminist fiction\",\"Married women -- Psychology -- Fiction\",\"Mentally ill women -- Fiction\",\"Psychological fiction\",\"Sex role -- Fiction\"],\"title\":\"The Yellow Wallpaper\"},{\"id\":844,\"authors\":[{\"birth_year\":1854,\"death_year\":1900,\"name\":\"Wilde, Oscar\"}],\"bookshelves\":[\"Plays\"],\"download_count\":13001,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/844.txt.utf-8\",\"text/html\":\"http://www.gutenberg.org/files/844/844-h.zip\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/844.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/844/844.zip\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/844.rdf\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/844.epub.images\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Comedies\",\"England -- Drama\",\"Foundlings -- Drama\",\"Identity (Psychology) -- Drama\"],\"title\":\"The Importance of Being Earnest: A Trivial Comedy for Serious People\"},{\"id\":76,\"authors\":[{\"birth_year\":1835,\"death_year\":1910,\"name\":\"Twain, Mark\"}],\"bookshelves\":[\"Banned Books from Anne Haight's list\",\"Best Books Ever Listings\"],\"download_count\":11792,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/76.kindle.noimages\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/76/76-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/76.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/76/76.txt\",\"application/zip\":\"http://www.gutenberg.org/files/76/76-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/76.epub.images\",\"image/jpeg\":\"http://www.gutenberg.org/cache/epub/76/pg76.cover.medium.jpg\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/76/76-h/76-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Adventure stories\",\"Bildungsromans\",\"Boys -- Fiction\",\"Finn, Huckleberry (Fictitious character) -- Fiction\",\"Fugitive slaves -- Fiction\",\"Humorous stories\",\"Male friendship -- Fiction\",\"Mississippi River -- Fiction\",\"Missouri -- Fiction\",\"Race relations -- Fiction\",\"Runaway children -- Fiction\"],\"title\":\"Adventures of Huckleberry Finn\"},{\"id\":5200,\"authors\":[{\"birth_year\":1883,\"death_year\":1924,\"name\":\"Kafka, Franz\"}],\"bookshelves\":[\"Horror\"],\"download_count\":11301,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/5200.txt.utf-8\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/5200.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/5200/5200.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/5200.rdf\",\"text/rtf\":\"http://www.gutenberg.org/files/5200/5200-r.rtf\",\"application/zip\":\"http://www.gutenberg.org/files/5200/5200-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/5200.epub.images\",\"text/html; charset=iso-8859-1\":\"http://www.gutenberg.org/files/5200/5200-h/5200-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Metamorphosis -- Fiction\",\"Psychological fiction\"],\"title\":\"Metamorphosis\"},{\"id\":84,\"authors\":[{\"birth_year\":1797,\"death_year\":1851,\"name\":\"Shelley, Mary Wollstonecraft\"}],\"bookshelves\":[\"Gothic Fiction\",\"Movie Books\",\"Precursors of Science Fiction\",\"Science Fiction by Women\"],\"download_count\":11129,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/84.txt.utf-8\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/84.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/84/84.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/84.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/84/84-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/84.epub.noimages\",\"text/html; charset=iso-8859-1\":\"http://www.gutenberg.org/files/84/84-h/84-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Frankenstein's monster (Fictitious character) -- Fiction\",\"Frankenstein, Victor (Fictitious character) -- Fiction\",\"Gothic fiction (Literary genre)\",\"Horror tales\",\"Monsters -- Fiction\",\"Science fiction\",\"Scientists -- Fiction\"],\"title\":\"Frankenstein; Or, The Modern Prometheus\"},{\"id\":1661,\"authors\":[{\"birth_year\":1859,\"death_year\":1930,\"name\":\"Doyle, Arthur Conan\"}],\"bookshelves\":[\"Banned Books from Anne Haight's list\",\"Contemporary Reviews\",\"Detective Fiction\"],\"download_count\":10959,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/1661.txt.utf-8\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/1661.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/1661/1661.zip\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/1661.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/1661/1661-8.txt\",\"application/zip\":\"http://www.gutenberg.org/files/1661/1661-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/1661.epub.images\",\"text/html; charset=iso-8859-1\":\"http://www.gutenberg.org/files/1661/1661-h/1661-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Detective and mystery stories, English\",\"Holmes, Sherlock (Fictitious character) -- Fiction\",\"Private investigators -- England -- Fiction\"],\"title\":\"The Adventures of Sherlock Holmes\"},{\"id\":1232,\"authors\":[{\"birth_year\":1469,\"death_year\":1527,\"name\":\"Machiavelli, Niccolò\"}],\"bookshelves\":[\"Banned Books from Anne Haight's list\",\"Harvard Classics\",\"Philosophy\",\"Politics\"],\"download_count\":10596,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/1232.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/1232/1232.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/1232.rdf\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/1232.epub.noimages\",\"application/zip\":\"http://www.gutenberg.org/files/1232/1232.zip\",\"text/plain\":\"http://www.gutenberg.org/ebooks/1232.txt.utf-8\",\"text/html; charset=us-ascii\":\"http://www.gutenberg.org/files/1232/1232-h/1232-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Political ethics -- Early works to 1800\",\"Political science -- Philosophy -- Early works to 1800\",\"State, The -- Early works to 1800\"],\"title\":\"The Prince\"},{\"id\":2591,\"authors\":[{\"birth_year\":1785,\"death_year\":1863,\"name\":\"Grimm, Jacob\"},{\"birth_year\":1786,\"death_year\":1859,\"name\":\"Grimm, Wilhelm\"}],\"bookshelves\":[],\"download_count\":10100,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/2591.kindle.images\",\"application/pdf\":\"http://www.gutenberg.org/files/2591/2591-pdf.pdf\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/2591/2591.txt\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/2591/2591-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/2591.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/2591/2591-0.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/2591.epub.noimages\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/2591/2591-h/2591-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Fairy tales -- Germany\"],\"title\":\"Grimms' Fairy Tales\"},{\"id\":1400,\"authors\":[{\"birth_year\":1812,\"death_year\":1870,\"name\":\"Dickens, Charles\"}],\"bookshelves\":[\"Best Books Ever Listings\"],\"download_count\":9909,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/1400.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/1400/1400.txt\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/1400/1400-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/1400.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/1400/1400-8.txt\",\"application/zip\":\"http://www.gutenberg.org/files/1400/1400-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/1400.epub.images\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/1400/1400-h/1400-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Benefactors -- Fiction\",\"Bildungsromans\",\"England -- Fiction\",\"Ex-convicts -- Fiction\",\"Man-woman relationships -- Fiction\",\"Orphans -- Fiction\",\"Revenge -- Fiction\",\"Young men -- Fiction\"],\"title\":\"Great Expectations\"},{\"id\":2542,\"authors\":[{\"birth_year\":1828,\"death_year\":1906,\"name\":\"Ibsen, Henrik\"}],\"bookshelves\":[\"Best Books Ever Listings\"],\"download_count\":9882,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/2542.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/2542/2542.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/2542.rdf\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/2542.epub.images\",\"application/zip\":\"http://www.gutenberg.org/files/2542/2542.zip\",\"text/plain\":\"http://www.gutenberg.org/ebooks/2542.txt.utf-8\",\"text/html; charset=us-ascii\":\"http://www.gutenberg.org/files/2542/2542-h/2542-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Man-woman relationships -- Drama\",\"Marriage -- Drama\",\"Norwegian drama -- Translations into English\",\"Wives -- Drama\"],\"title\":\"A Doll's House : a play\"},{\"id\":174,\"authors\":[{\"birth_year\":1854,\"death_year\":1900,\"name\":\"Wilde, Oscar\"}],\"bookshelves\":[\"Gothic Fiction\",\"Movie Books\"],\"download_count\":9652,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/174.txt.utf-8\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/174.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/174/174.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/174.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/174/174-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/174.epub.noimages\",\"text/html; charset=iso-8859-1\":\"http://www.gutenberg.org/files/174/174-h/174-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Appearance (Philosophy) -- Fiction\",\"Conduct of life -- Fiction\",\"Didactic fiction\",\"Great Britain -- History -- Victoria, 1837-1901 -- Fiction\",\"London (England) -- History -- 1800-1950 -- Fiction\",\"Paranormal fiction\",\"Portraits -- Fiction\",\"Supernatural -- Fiction\"],\"title\":\"The Picture of Dorian Gray\"},{\"id\":2701,\"authors\":[{\"birth_year\":1819,\"death_year\":1891,\"name\":\"Melville, Herman\"}],\"bookshelves\":[\"Best Books Ever Listings\"],\"download_count\":9466,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/2701.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/2701/2701.txt\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/2701/2701-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/2701.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/2701/2701-0.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/2701.epub.images\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/2701/2701-h/2701-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Adventure stories\",\"Ahab, Captain (Fictitious character) -- Fiction\",\"Mentally ill -- Fiction\",\"Psychological fiction\",\"Sea stories\",\"Ship captains -- Fiction\",\"Whales -- Fiction\",\"Whaling -- Fiction\",\"Whaling ships -- Fiction\"],\"title\":\"Moby Dick; Or, The Whale\"},{\"id\":345,\"authors\":[{\"birth_year\":1847,\"death_year\":1912,\"name\":\"Stoker, Bram\"}],\"bookshelves\":[\"Gothic Fiction\",\"Horror\",\"Movie Books\",\"Mystery Fiction\"],\"download_count\":9399,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/345.txt.utf-8\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/345.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/345/345.zip\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/345.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/345/345-8.txt\",\"application/zip\":\"http://www.gutenberg.org/files/345/345-8.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/345.epub.noimages\",\"image/jpeg\":\"http://www.gutenberg.org/cache/epub/345/pg345.cover.medium.jpg\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/345/345-h/345-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Dracula, Count (Fictitious character) -- Fiction\",\"Epistolary fiction\",\"Gothic fiction (Literary genre)\",\"Horror tales\",\"Transylvania (Romania) -- Fiction\",\"Vampires -- Fiction\",\"Whitby (England) -- Fiction\"],\"title\":\"Dracula\"},{\"id\":4300,\"authors\":[{\"birth_year\":1882,\"death_year\":1941,\"name\":\"Joyce, James\"}],\"bookshelves\":[\"Banned Books from Anne Haight's list\",\"Best Books Ever Listings\",\"Erotic Fiction\"],\"download_count\":8852,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/4300.kindle.images\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/4300/4300-0.zip\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/4300.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/4300/4300-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/4300.epub.noimages\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/4300/4300-h/4300-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Alienation (Social psychology) -- Fiction\",\"Artists -- Fiction\",\"City and town life -- Fiction\",\"Domestic fiction\",\"Dublin (Ireland) -- Fiction\",\"Epic literature\",\"Jewish men -- Fiction\",\"Male friendship -- Fiction\",\"Married people -- Fiction\",\"Psychological fiction\"],\"title\":\"Ulysses\"},{\"id\":2600,\"authors\":[{\"birth_year\":1828,\"death_year\":1910,\"name\":\"Tolstoy, Leo, graf\"}],\"bookshelves\":[\"Best Books Ever Listings\",\"Historical Fiction\",\"Movie Books\",\"Napoleonic(Bookshelf)\",\"Opera\"],\"download_count\":8684,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/2600.kindle.noimages\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/2600/2600-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/2600.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/2600/2600-0.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/2600.epub.images\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/2600/2600-h/2600-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Aristocracy (Social class) -- Russia -- Fiction\",\"Historical fiction\",\"Napoleonic Wars, 1800-1815 -- Campaigns -- Russia -- Fiction\",\"Russia -- History -- Alexander I, 1801-1825 -- Fiction\",\"War stories\"],\"title\":\"War and Peace\"},{\"id\":45,\"authors\":[{\"birth_year\":1874,\"death_year\":1942,\"name\":\"Montgomery, L. M. (Lucy Maud)\"}],\"bookshelves\":[\"Children's Literature\"],\"download_count\":8640,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/45.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/45/45.txt\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/45/45-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/45.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/45/45-8.zip\",\"application/zip\":\"http://www.gutenberg.org/files/45/45-0.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/45.epub.noimages\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/45/45-h.zip\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Bildungsromans\",\"Canada -- History -- 1867-1914 -- Fiction\",\"Country life -- Prince Edward Island -- Fiction\",\"Friendship -- Fiction\",\"Girls -- Fiction\",\"Islands -- Fiction\",\"Orphans -- Fiction\",\"Prince Edward Island -- History -- 20th century -- Fiction\",\"Shirley, Anne (Fictitious character) -- Fiction\"],\"title\":\"Anne of Green Gables\"},{\"id\":30254,\"authors\":[{\"birth_year\":null,\"death_year\":null,\"name\":\"Anonymous\"}],\"bookshelves\":[],\"download_count\":8530,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/30254.txt.utf-8\",\"text/html\":\"http://www.gutenberg.org/ebooks/30254.html.images\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/30254.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/30254/30254.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/30254.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/30254/30254-8.zip\",\"application/zip\":\"http://www.gutenberg.org/files/30254/30254.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/30254.epub.images\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Erotic stories\"],\"title\":\"The Romance of Lust: A Classic Victorian erotic novel\"},{\"id\":158,\"authors\":[{\"birth_year\":1775,\"death_year\":1817,\"name\":\"Austen, Jane\"}],\"bookshelves\":[],\"download_count\":8357,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/158.kindle.noimages\",\"application/pdf\":\"http://www.gutenberg.org/files/158/158-pdf.pdf\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/158/158.zip\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/158/158-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/158.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/158/158-0.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/158.epub.images\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/158/158-h.zip\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Bildungsromans\",\"England -- Fiction\",\"Fathers and daughters -- Fiction\",\"Female friendship -- Fiction\",\"Humorous stories\",\"Love stories\",\"Mate selection -- Fiction\",\"Young women -- Fiction\"],\"title\":\"Emma\"},{\"id\":33283,\"authors\":[{\"birth_year\":1851,\"death_year\":1916,\"name\":\"Thompson, Silvanus P. (Silvanus Phillips)\"}],\"bookshelves\":[\"Mathematics\"],\"download_count\":8348,\"formats\":{\"application/zip\":\"http://www.gutenberg.org/files/33283/33283-pdf.zip\",\"application/prs.tex\":\"http://www.gutenberg.org/files/33283/33283-t.zip\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/33283.rdf\",\"application/pdf\":\"http://www.gutenberg.org/files/33283/33283-pdf.pdf\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Calculus\"],\"title\":\"Calculus Made Easy: Being a very-simplest introduction to those beautiful methods which are generally called by the terrifying names of the Differential Calculus and the Integral Calculus\"},{\"id\":1184,\"authors\":[{\"birth_year\":1802,\"death_year\":1870,\"name\":\"Dumas, Alexandre\"}],\"bookshelves\":[\"Adventure\",\"Movie Books\"],\"download_count\":8093,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/1184.kindle.images\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/1184/1184-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/1184.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/1184/1184-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/1184.epub.noimages\",\"image/jpeg\":\"http://www.gutenberg.org/cache/epub/1184/pg1184.cover.small.jpg\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/1184/1184-h/1184-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Adventure stories\",\"Dantès, Edmond (Fictitious character) -- Fiction\",\"France -- History -- 19th century -- Fiction\",\"Historical fiction\",\"Pirates -- Fiction\",\"Prisoners -- Fiction\",\"Revenge -- Fiction\"],\"title\":\"The Count of Monte Cristo, Illustrated\"},{\"id\":1260,\"authors\":[{\"birth_year\":1816,\"death_year\":1855,\"name\":\"Brontë, Charlotte\"}],\"bookshelves\":[],\"download_count\":7730,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/1260.txt.utf-8\",\"text/html\":\"http://www.gutenberg.org/files/1260/1260-h/1260-h.htm\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/1260.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/1260/1260.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/1260.rdf\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/1260.epub.images\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Bildungsromans\",\"Charity-schools -- Fiction\",\"Country homes -- Fiction\",\"England -- Fiction\",\"Fathers and daughters -- Fiction\",\"Governesses -- Fiction\",\"Love stories\",\"Married people -- Fiction\",\"Mentally ill women -- Fiction\",\"Orphans -- Fiction\",\"Young women -- Fiction\"],\"title\":\"Jane Eyre: An Autobiography\"},{\"id\":27827,\"authors\":[{\"birth_year\":null,\"death_year\":null,\"name\":\"Vatsyayana\"}],\"bookshelves\":[\"Banned Books from Anne Haight's list\",\"Erotic Fiction\",\"Sociology\"],\"download_count\":7490,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/27827.txt.utf-8\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/27827.kindle.noimages\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/27827/27827.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/27827.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/27827/27827-8.txt\",\"application/zip\":\"http://www.gutenberg.org/files/27827/27827.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/27827.epub.images\",\"text/html; charset=iso-8859-1\":\"http://www.gutenberg.org/files/27827/27827-h/27827-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Love\",\"Sex\"],\"title\":\"The Kama Sutra of Vatsyayana: Translated From the Sanscrit in Seven Parts With Preface, Introduction and Concluding Remarks\"},{\"id\":16328,\"authors\":[],\"bookshelves\":[\"Poetry\"],\"download_count\":7154,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/16328.txt.utf-8\",\"text/html\":\"http://www.gutenberg.org/files/16328/16328-h/16328-h.htm\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/16328.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/16328/16328.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/16328.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/16328/16328-8.txt\",\"application/zip\":\"http://www.gutenberg.org/files/16328/16328.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/16328.epub.noimages\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Dragons -- Poetry\",\"Epic poetry, English (Old)\",\"Monsters -- Poetry\"],\"title\":\"Beowulf: An Anglo-Saxon Epic Poem\"},{\"id\":2500,\"authors\":[{\"birth_year\":1877,\"death_year\":1962,\"name\":\"Hesse, Hermann\"}],\"bookshelves\":[],\"download_count\":6840,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/2500.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/2500/2500.txt\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/2500.epub.images\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/2500/2500-8.txt\",\"application/zip\":\"http://www.gutenberg.org/files/2500/2500.zip\",\"text/plain\":\"http://www.gutenberg.org/ebooks/2500.txt.utf-8\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/2500.rdf\",\"text/html; charset=iso-8859-1\":\"http://www.gutenberg.org/files/2500/2500-h/2500-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Buddhism -- Fiction\",\"Buddhist philosophy -- Fiction\",\"Gautama Buddha -- Fiction\",\"India -- Fiction\",\"Religious fiction\"],\"title\":\"Siddhartha\"},{\"id\":2814,\"authors\":[{\"birth_year\":1882,\"death_year\":1941,\"name\":\"Joyce, James\"}],\"bookshelves\":[\"Banned Books from Anne Haight's list\"],\"download_count\":6526,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/2814.kindle.noimages\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/2814/2814-0.zip\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/2814.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/2814/2814-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/2814.epub.images\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/2814/2814-h/2814-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Dublin (Ireland) -- Fiction\",\"Short stories\"],\"title\":\"Dubliners\"},{\"id\":135,\"authors\":[{\"birth_year\":1802,\"death_year\":1885,\"name\":\"Hugo, Victor\"}],\"bookshelves\":[\"Banned Books from Anne Haight's list\",\"Historical Fiction\"],\"download_count\":6444,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/135.kindle.images\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/135/135-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/135.rdf\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/135.epub.noimages\",\"image/jpeg\":\"http://www.gutenberg.org/cache/epub/135/pg135.cover.medium.jpg\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/135/135-h/135-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Epic literature\",\"Ex-convicts -- Fiction\",\"Historical fiction\",\"Orphans -- Fiction\",\"Paris (France) -- Fiction\"],\"title\":\"Les Misérables\"},{\"id\":2000,\"authors\":[{\"birth_year\":1547,\"death_year\":1616,\"name\":\"Cervantes Saavedra, Miguel de\"}],\"bookshelves\":[\"Best Books Ever Listings\",\"Harvard Classics\"],\"download_count\":6230,\"formats\":{\"text/plain\":\"http://www.gutenberg.org/ebooks/2000.txt.utf-8\",\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/2000.kindle.images\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/2000.rdf\",\"text/plain; charset=iso-8859-1\":\"http://www.gutenberg.org/files/2000/2000-8.zip\",\"application/zip\":\"http://www.gutenberg.org/files/2000/2000-h.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/2000.epub.noimages\",\"text/html; charset=iso-8859-1\":\"http://www.gutenberg.org/files/2000/2000-h/2000-h.htm\"},\"languages\":[\"es\"],\"media_type\":\"Text\",\"subjects\":[\"Knights and knighthood -- Spain -- Fiction\",\"Picaresque literature\",\"Romances\",\"Spain -- Social life and customs -- 16th century -- Fiction\"],\"title\":\"Don Quijote\"},{\"id\":219,\"authors\":[{\"birth_year\":1857,\"death_year\":1924,\"name\":\"Conrad, Joseph\"}],\"bookshelves\":[\"Best Books Ever Listings\",\"Movie Books\"],\"download_count\":6213,\"formats\":{\"application/x-mobipocket-ebook\":\"http://www.gutenberg.org/ebooks/219.kindle.images\",\"text/plain; charset=us-ascii\":\"http://www.gutenberg.org/files/219/219.txt\",\"text/plain; charset=utf-8\":\"http://www.gutenberg.org/files/219/219-0.txt\",\"application/rdf+xml\":\"http://www.gutenberg.org/ebooks/219.rdf\",\"application/zip\":\"http://www.gutenberg.org/files/219/219-0.zip\",\"application/epub+zip\":\"http://www.gutenberg.org/ebooks/219.epub.noimages\",\"text/html; charset=utf-8\":\"http://www.gutenberg.org/files/219/219-h/219-h.htm\"},\"languages\":[\"en\"],\"media_type\":\"Text\",\"subjects\":[\"Africa -- Fiction\",\"Degeneration -- Fiction\",\"Europeans -- Africa -- Fiction\",\"Imperialism -- Fiction\",\"Psychological fiction\",\"Trading posts -- Fiction\"],\"title\":\"Heart of Darkness\"}]}";
            BookList data = new Gson().fromJson(resp, BookList.class);
            generateDataList(data);
        } catch (Exception e) {
            Log.d("VV", "Exception " + e.getMessage());
        } finally {
            progressDialog.dismiss();
        }
        /*
         */
        /*Create handle for the RetrofitInstance interface*//*

        DataServices service = RetrofitClientInstance.getRetrofitInstance().create(DataServices.class);
        Call<BookList> call = service.getBooks();
        call.enqueue(new Callback<BookList>() {
            @Override
            public void onResponse(Call<BookList> call, Response<BookList> response) {
                progressDialog.dismiss();
                generateDataList(response.body());
            }

            @Override
            public void onFailure(Call<BookList> call, Throwable t) {
                progressDialog.dismiss();
                Log.d("vv", t.getMessage()+"\n"+ t.getCause() );
                Toast.makeText(MainActivity.this, "Something went wrong...Please try later!", Toast.LENGTH_SHORT).show();
            }
        });
*/
    }

    private void generateDataList(BookList body) {
        // We have pre define category so I have filter it before use
        String[] name = {"Fiction", "Drama", "Humor", "Politics", "Philosophy", "History", "Adventure"};
        for (String nm : name) {
            for (BookDetail detail : body.getResults()) {
                for (String category : detail.getSubjects()) {
                    if (category.contains(nm)) {
                        manageMap(nm, detail);
                        break;
                    }
                }
            }
        }
    }

    private void manageMap(String key, BookDetail detail) {
        List<BookDetail> list;
        if (mBookMap.containsKey(key)) {
            list = mBookMap.get(key);
            Log.d("Vv", "added " + key + " size " + list.size());
        } else {
            list = new ArrayList<>();
        }
        list.add(detail);
        mBookMap.put(key, list);
    }

    private void createCardList() {
        int[] drawable = {R.drawable.ic_fiction, R.drawable.ic_drama, R.drawable.ic_humour,
                R.drawable.ic_politics, R.drawable.ic_philosophy, R.drawable.ic_history, R.drawable.ic_adventure};
        String[] name = {"Fiction", "Drama", "Humor", "Politics", "Philosophy", "History", "Adventure"};
        for (int i = 0; i < name.length; i++) {
            CardModel m = new CardModel();
            m.setIcon(drawable[i]);
            m.setName(name[i]);
            list.add(m);
        }
        adapter.notifyDataSetChanged();
    }
}